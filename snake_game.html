<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game - TechyNoob Games</title>
    <!-- AdSense Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6446522570285835"
     crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;800&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
            box-sizing: border-box;
            overflow: hidden; /* Prevent body scroll */
        }
        canvas {
            background-color: #2d3748; /* Dark gray for game board */
            display: block;
            border: 4px solid #4a5568; /* Darker border */
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            touch-action: manipulation; /* Disable double-tap zoom on touch devices */
        }
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            max-width: 90vw;
            width: 100%;
        }
        .score-board {
            font-family: 'Press Start 2P', cursive;
            font-size: 2rem;
            color: #f7fafc;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            background-color: #2d3748;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: 2px solid #4a5568;
        }
        .game-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        .game-button {
            background-image: linear-gradient(to right, #6EE7B7, #3B82F6);
            color: white;
            font-family: 'Inter', sans-serif;
            font-weight: bold;
            padding: 0.8rem 2rem;
            border-radius: 9999px; /* full rounded */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease-in-out;
            border: none;
            cursor: pointer;
            font-size: 1.125rem;
        }
        .game-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            filter: brightness(1.1);
        }
        .game-button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .message-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(45, 55, 72, 0.95);
            border: 2px solid #4a5568;
            border-radius: 0.75rem;
            padding: 2rem;
            text-align: center;
            z-index: 1000;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
            display: none; /* Hidden by default */
        }
        .message-box h2 {
            font-family: 'Press Start 2P', cursive;
            color: #6EE7B7;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .message-box p {
            font-size: 1.125rem;
            color: #e2e8f0;
            margin-bottom: 1.5rem;
        }
        .message-box button {
            background-image: linear-gradient(to right, #3B82F6, #9333EA);
        }
        .d-pad {
            display: grid;
            grid-template-areas:
                ". up ."
                "left . right"
                ". down .";
            gap: 5px;
            width: 150px;
            height: 150px;
            margin-top: 1rem;
            background-color: #2d3748;
            border-radius: 0.75rem;
            padding: 10px;
            border: 2px solid #4a5568;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .d-pad button {
            background-image: linear-gradient(to top, #4a5568, #6a7588);
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .d-pad button:active {
            transform: translateY(1px);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        .d-pad .up { grid-area: up; }
        .d-pad .left { grid-area: left; }
        .d-pad .right { grid-area: right; }
        .d-pad .down { grid-area: down; }

        @media (max-width: 640px) {
            .game-container {
                gap: 1rem;
            }
            .score-board {
                font-size: 1.5rem;
                padding: 0.5rem 1rem;
            }
            .game-button {
                padding: 0.6rem 1.5rem;
                font-size: 1rem;
            }
            .message-box h2 {
                font-size: 1.5rem;
            }
            .message-box p {
                font-size: 1rem;
            }
            .d-pad {
                width: 120px;
                height: 120px;
            }
            .d-pad button {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body class="selection:bg-teal-300 selection:text-teal-900">
    <header class="w-full bg-gray-900 shadow-lg py-4 px-6 md:px-8 lg:px-12 mb-6">
        <nav class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-2 rounded-md p-1 border border-gray-700">
                <img src="20211212_160808_0000.png" alt="TechyNoob Logo" class="h-12 sm:h-16 w-auto">
                <span class="text-3xl font-extrabold text-blue-400 hidden sm:block">TechyNoob Games</span>
            </a>
            <a href="index.html#games-section" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-full shadow-md transition duration-300 transform hover:scale-105">
                Back to Games
            </a>
        </nav>
    </header>

    <div class="game-container">
        <h1 class="text-4xl md:text-5xl font-extrabold mb-4 gradient-text text-center">Snake Game</h1>
        <div id="score" class="score-board">Score: 0</div>
        <canvas id="snakeGameCanvas"></canvas>
        <div class="game-controls">
            <button id="startButton" class="game-button">Start Game</button>
            <button id="resetButton" class="game-button hidden">Reset</button>
        </div>
         <div class="d-pad sm:hidden">
            <button class="d-pad-button up" data-direction="up">⬆</button>
            <button class="d-pad-button left" data-direction="left">⬅</button>
            <button class="d-pad-button right" data-direction="right">⮕</button>
            <button class="d-pad-button down" data-direction="down">⬇</button>
        </div>
    </div>

    <!-- Message Box -->
    <div id="messageBox" class="message-box">
        <h2 id="messageTitle"></h2>
        <p id="messageText"></p>
        <button id="messageBoxClose" class="game-button">OK</button>
    </div>

    <script>
        const canvas = document.getElementById('snakeGameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score');
        const startButton = document.getElementById('startButton');
        const resetButton = document.getElementById('resetButton');
        const messageBox = document.getElementById('messageBox');
        const messageTitle = document.getElementById('messageTitle');
        const messageText = document.getElementById('messageText');
        const messageBoxClose = document.getElementById('messageBoxClose');
        const dPadButtons = document.querySelectorAll('.d-pad-button');

        let gameLoopId;
        let gameRunning = false;
        let gameSpeed = 100; // Milliseconds per frame

        // Game settings
        const gridSize = 20; // Size of each segment/food
        let canvasSize = 400; // Default canvas size

        let snake = [{ x: 10, y: 10 }];
        let food = {};
        let direction = 'right';
        let changingDirection = false;
        let score = 0;

        function setCanvasSize() {
            const containerWidth = canvas.parentElement.clientWidth;
            const containerHeight = window.innerHeight * 0.7; // Use a percentage of viewport height

            // Make canvas square and responsive
            canvasSize = Math.min(containerWidth, containerHeight, 400);
            canvas.width = canvasSize - (canvasSize % gridSize); // Ensure it's a multiple of gridSize
            canvas.height = canvasSize - (canvasSize % gridSize); // Ensure it's a multiple of gridSize
            if (gameRunning) {
                draw(); // Redraw if game is running
            }
        }

        function initGame() {
            snake = [{ x: 10, y: 10 }];
            direction = 'right';
            changingDirection = false;
            score = 0;
            scoreDisplay.textContent = `Score: ${score}`;
            gameRunning = false;
            startButton.classList.remove('hidden');
            resetButton.classList.add('hidden');
            generateFood();
            draw(); // Draw initial state
        }

        function drawSnakeSegment(segment) {
            ctx.fillStyle = '#6EE7B7'; /* Light green */
            ctx.strokeStyle = '#3B82F6'; /* Blue */
            ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize, gridSize);
            ctx.strokeRect(segment.x * gridSize, segment.y * gridSize, gridSize, gridSize);
        }

        function drawFood() {
            ctx.fillStyle = '#9333EA'; /* Purple */
            ctx.strokeStyle = '#f7fafc'; /* White */
            ctx.beginPath();
            ctx.arc(food.x * gridSize + gridSize / 2, food.y * gridSize + gridSize / 2, gridSize / 2 - 2, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#2d3748';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawFood();
            snake.forEach(drawSnakeSegment);
        }

        function generateFood() {
            food = {
                x: Math.floor(Math.random() * (canvas.width / gridSize)),
                y: Math.floor(Math.random() * (canvas.height / gridSize))
            };

            // Ensure food does not spawn on the snake
            for (let i = 0; i < snake.length; i++) {
                if (snake[i].x === food.x && snake[i].y === food.y) {
                    generateFood(); // Regenerate if collision
                    return;
                }
            }
        }

        function moveSnake() {
            const head = { x: snake[0].x, y: snake[0].y };

            switch (direction) {
                case 'up':
                    head.y--;
                    break;
                case 'down':
                    head.y++;
                    break;
                case 'left':
                    head.x--;
                    break;
                case 'right':
                    head.x++;
                    break;
            }

            snake.unshift(head); // Add new head

            // Check if snake ate food
            const didEatFood = head.x === food.x && head.y === food.y;
            if (didEatFood) {
                score += 10;
                scoreDisplay.textContent = `Score: ${score}`;
                generateFood(); // Generate new food
            } else {
                snake.pop(); // Remove tail if no food eaten
            }
        }

        function checkCollision() {
            const head = snake[0];

            // Wall collision
            const hitLeftWall = head.x < 0;
            const hitRightWall = head.x * gridSize >= canvas.width;
            const hitTopWall = head.y < 0;
            const hitBottomWall = head.y * gridSize >= canvas.height;

            if (hitLeftWall || hitRightWall || hitTopWall || hitBottomWall) {
                endGame("Game Over!", `You hit a wall! Final Score: ${score}`);
                return true;
            }

            // Self-collision
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    endGame("Game Over!", `You ate yourself! Final Score: ${score}`);
                    return true;
                }
            }
            return false;
        }

        function gameLoop() {
            if (checkCollision()) {
                return;
            }

            changingDirection = false;
            moveSnake();
            draw();
            gameLoopId = setTimeout(() => requestAnimationFrame(gameLoop), gameSpeed);
        }

        function startGame() {
            if (!gameRunning) {
                gameRunning = true;
                startButton.classList.add('hidden');
                resetButton.classList.remove('hidden');
                hideMessageBox();
                gameLoop();
            }
        }

        function endGame(title, text) {
            clearTimeout(gameLoopId);
            gameRunning = false;
            showMessageBox(title, text);
            resetButton.classList.remove('hidden');
            startButton.classList.add('hidden');
        }

        function showMessageBox(title, text) {
            messageTitle.textContent = title;
            messageText.textContent = text;
            messageBox.style.display = 'block';
        }

        function hideMessageBox() {
            messageBox.style.display = 'none';
        }

        // Event Listeners
        startButton.addEventListener('click', startGame);
        resetButton.addEventListener('click', () => {
            initGame();
            hideMessageBox();
        });
        messageBoxClose.addEventListener('click', hideMessageBox);

        // Keyboard control
        document.addEventListener('keydown', e => {
            if (changingDirection) return; // Prevent rapid direction changes
            changingDirection = true;

            const keyPressed = e.key;
            const goingUp = direction === 'up';
            const goingDown = direction === 'down';
            const goingLeft = direction === 'left';
            const goingRight = direction === 'right';

            if (keyPressed === 'ArrowLeft' && !goingRight) {
                direction = 'left';
            } else if (keyPressed === 'ArrowUp' && !goingDown) {
                direction = 'up';
            } else if (keyPressed === 'ArrowRight' && !goingLeft) {
                direction = 'right';
            } else if (keyPressed === 'ArrowDown' && !goingUp) {
                direction = 'down';
            }
        });

        // Touch (D-Pad) control
        dPadButtons.forEach(button => {
            button.addEventListener('click', function() {
                if (!gameRunning || changingDirection) return;
                changingDirection = true;

                const newDirection = this.dataset.direction;
                const goingUp = direction === 'up';
                const goingDown = direction === 'down';
                const goingLeft = direction === 'left';
                const goingRight = direction === 'right';

                if (newDirection === 'left' && !goingRight) {
                    direction = 'left';
                } else if (newDirection === 'up' && !goingDown) {
                    direction = 'up';
                } else if (newDirection === 'right' && !goingLeft) {
                    direction = 'right';
                } else if (newDirection === 'down' && !goingUp) {
                    direction = 'down';
                }
            });
        });


        window.addEventListener('resize', setCanvasSize);
        window.onload = () => {
            setCanvasSize();
            initGame();
        };

    </script>
</body>
</html>
